<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeThere - Real-time Event Coordination</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.454.0/umd/lucide.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    borderRadius: {
                        lg: "var(--radius)",
                        md: "calc(var(--radius) - 2px)",
                        sm: "calc(var(--radius) - 4px)",
                    },
                    colors: {
                        background: "var(--background)",
                        foreground: "var(--foreground)",
                        card: {
                            DEFAULT: "var(--card)",
                            foreground: "var(--card-foreground)",
                        },
                        popover: {
                            DEFAULT: "var(--popover)",
                            foreground: "var(--popover-foreground)",
                        },
                        primary: {
                            DEFAULT: "var(--primary)",
                            foreground: "var(--primary-foreground)",
                        },
                        secondary: {
                            DEFAULT: "var(--secondary)",
                            foreground: "var(--secondary-foreground)",
                        },
                        muted: {
                            DEFAULT: "var(--muted)",
                            foreground: "var(--muted-foreground)",
                        },
                        accent: {
                            DEFAULT: "var(--accent)",
                            foreground: "var(--accent-foreground)",
                        },
                        destructive: {
                            DEFAULT: "var(--destructive)",
                            foreground: "var(--destructive-foreground)",
                        },
                        border: "var(--border)",
                        input: "var(--input)",
                        ring: "var(--ring)",
                    },
                    fontFamily: {
                        sans: ["Inter", "system-ui", "sans-serif"],
                        mono: ["JetBrains Mono", "monospace"],
                    }
                },
            }
        };
    </script>
    <style>
        :root {
            --background: hsl(220 14% 96%);
            --foreground: hsl(220 14% 11%);
            --card: hsl(0 0% 100%);
            --card-foreground: hsl(220 14% 11%);
            --popover: hsl(0 0% 100%);
            --popover-foreground: hsl(220 14% 11%);
            --primary: hsl(142 71% 45%);
            --primary-foreground: hsl(0 0% 100%);
            --secondary: hsl(220 13% 91%);
            --secondary-foreground: hsl(220 9% 46%);
            --muted: hsl(220 13% 91%);
            --muted-foreground: hsl(220 9% 46%);
            --accent: hsl(217 91% 60%);
            --accent-foreground: hsl(0 0% 100%);
            --destructive: hsl(0 84% 60%);
            --destructive-foreground: hsl(0 0% 100%);
            --border: hsl(220 13% 91%);
            --input: hsl(220 13% 91%);
            --ring: hsl(142 71% 45%);
            --radius: 8px;
        }

        .dark {
            --background: hsl(220 14% 11%);
            --foreground: hsl(220 14% 96%);
            --card: hsl(220 14% 14%);
            --card-foreground: hsl(220 14% 96%);
            --popover: hsl(220 14% 14%);
            --popover-foreground: hsl(220 14% 96%);
            --primary: hsl(142 71% 45%);
            --primary-foreground: hsl(0 0% 100%);
            --secondary: hsl(220 14% 16%);
            --secondary-foreground: hsl(220 9% 70%);
            --muted: hsl(220 14% 16%);
            --muted-foreground: hsl(220 9% 70%);
            --accent: hsl(217 91% 60%);
            --accent-foreground: hsl(0 0% 100%);
            --destructive: hsl(0 84% 60%);
            --destructive-foreground: hsl(0 0% 100%);
            --border: hsl(220 14% 16%);
            --input: hsl(220 14% 16%);
            --ring: hsl(142 71% 45%);
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

        .pulse-ring {
            animation: pulse-ring 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @keyframes pulse-ring {
            0% {
                transform: scale(0.8);
                opacity: 1;
            }
            100% {
                transform: scale(2.4);
                opacity: 0;
            }
        }

        .connection-pulse {
            animation: connection-pulse 1.5s ease-in-out infinite;
        }

        @keyframes connection-pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .slide-up {
            animation: slide-up 0.3s ease-out;
        }

        @keyframes slide-up {
            from {
                transform: translateY(10px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body class="bg-background text-foreground font-sans">
    <!-- @COMPONENT: App [Main application wrapper] -->
    <div class="min-h-screen bg-background">
        
        <!-- @COMPONENT: Header [Top navigation with connection status] -->
        <header class="bg-card border-b border-border px-4 py-3 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <h1 class="text-xl font-bold text-foreground">BeThere</h1>
                    
                    <!-- WebSocket Connection Status -->
                    <div class="flex items-center space-x-2 px-3 py-1 bg-primary/10 rounded-full" data-mock="true">
                        <div class="relative">
                            <div class="w-2 h-2 bg-primary rounded-full"></div>
                            <div class="absolute inset-0 w-2 h-2 bg-primary rounded-full pulse-ring"></div>
                        </div>
                        <span class="text-sm font-medium text-primary" data-bind="connectionStatus">Connected</span>
                        <span class="text-xs text-muted-foreground font-mono" data-bind="connectionTime">12ms</span>
                    </div>
                </div>

                <div class="flex items-center space-x-4">
                    <!-- Real-time Event Feed Toggle -->
                    <button class="p-2 hover:bg-muted rounded-lg transition-colors" data-event="click:toggleEventFeed">
                        <i data-lucide="activity" class="w-5 h-5"></i>
                    </button>
                    
                    <!-- User Avatar -->
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-primary-foreground text-sm font-medium" data-mock="true">
                        <span data-bind="user.initials">AY</span>
                    </div>
                </div>
            </div>
        </header>

        <div class="max-w-7xl mx-auto p-4 grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- @COMPONENT: MainContent [Event details and map] -->
            <div class="lg:col-span-2 space-y-6">
                
                <!-- Current Event Card -->
                <div class="bg-card rounded-xl border border-border p-6 shadow-sm">
                    <div class="flex items-start justify-between mb-4">
                        <div>
                            <h2 class="text-2xl font-bold text-foreground mb-2" data-bind="event.name">Friday Night Dinner</h2>
                            <div class="flex items-center space-x-4 text-sm text-muted-foreground">
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="calendar" class="w-4 h-4"></i>
                                    <span data-bind="event.date">Today, 7:30 PM</span>
                                </div>
                                <div class="flex items-center space-x-1">
                                    <i data-lucide="map-pin" class="w-4 h-4"></i>
                                    <span data-bind="event.location">Olive Garden, Downtown</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <!-- Share Button with Web Share API -->
                            <button class="p-2 hover:bg-muted rounded-lg transition-colors" data-event="click:shareEvent" data-implementation="Implement Web Share API with fallback">
                                <i data-lucide="share" class="w-5 h-5"></i>
                            </button>
                            
                            <!-- Delete Event (Creator Only) -->
                            <button class="p-2 hover:bg-destructive/10 hover:text-destructive rounded-lg transition-colors" data-event="click:deleteEvent" data-implementation="Show only for event creator">
                                <i data-lucide="trash-2" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Real-time Status Bar -->
                    <div class="bg-muted/50 rounded-lg p-4 mb-6">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-primary rounded-full connection-pulse"></div>
                                    <span class="text-sm font-medium">Live Updates Active</span>
                                </div>
                                <div class="text-xs text-muted-foreground font-mono" data-bind="wsStats">4 participants • 23ms latency</div>
                            </div>
                            <div class="text-xs text-muted-foreground" data-bind="lastUpdate">Updated 2s ago</div>
                        </div>
                    </div>

                    <!-- Interactive Map Placeholder -->
                    <div class="bg-muted/30 rounded-lg h-64 flex items-center justify-center border-2 border-dashed border-border">
                        <!-- Real map with live participant markers -->
                        <div class="text-center">
                            <i data-lucide="map" class="w-12 h-12 text-muted-foreground mx-auto mb-3"></i>
                            <p class="text-muted-foreground">Interactive Map with Live Locations</p>
                            <p class="text-xs text-muted-foreground mt-1">Real-time participant markers via WebSocket</p>
                        </div>
                    </div>
                </div>

                <!-- WebSocket Event Feed -->
                <div class="bg-card rounded-xl border border-border p-6 shadow-sm">
                    <h3 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                        <i data-lucide="activity" class="w-5 h-5"></i>
                        <span>Live Event Feed</span>
                    </h3>
                    
                    <div class="space-y-3 max-h-48 overflow-y-auto">
                        <!-- @MAP: eventFeed.map(event => ( -->
                        <div class="flex items-start space-x-3 slide-up" data-mock="true">
                            <div class="w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"></div>
                            <div class="flex-1">
                                <p class="text-sm"><span class="font-medium">Sarah</span> updated location - 0.3 miles away</p>
                                <p class="text-xs text-muted-foreground font-mono">2 seconds ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3" data-mock="true">
                            <div class="w-2 h-2 bg-accent rounded-full mt-2 flex-shrink-0"></div>
                            <div class="flex-1">
                                <p class="text-sm"><span class="font-medium">Mike</span> joined the event</p>
                                <p class="text-xs text-muted-foreground font-mono">15 seconds ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-3" data-mock="true">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"></div>
                            <div class="flex-1">
                                <p class="text-sm"><span class="font-medium">Alex</span> ETA updated: 8 minutes</p>
                                <p class="text-xs text-muted-foreground font-mono">32 seconds ago</p>
                            </div>
                        </div>
                        <!-- @END_MAP )) -->
                    </div>
                </div>

                <!-- Movement Detection Status -->
                <div class="bg-card rounded-xl border border-border p-6 shadow-sm">
                    <h3 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                        <i data-lucide="compass" class="w-5 h-5"></i>
                        <span>Movement Detection</span>
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-muted/50 rounded-lg p-4">
                            <div class="text-2xl font-bold text-foreground" data-bind="movementStats.threshold">100m</div>
                            <div class="text-sm text-muted-foreground">Movement Threshold</div>
                        </div>
                        <div class="bg-muted/50 rounded-lg p-4">
                            <div class="text-2xl font-bold text-foreground" data-bind="movementStats.interval">30s</div>
                            <div class="text-sm text-muted-foreground">Detection Interval</div>
                        </div>
                        <div class="bg-muted/50 rounded-lg p-4">
                            <div class="text-2xl font-bold text-primary" data-bind="movementStats.active">3</div>
                            <div class="text-sm text-muted-foreground">Moving Participants</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- @COMPONENT: Sidebar [Participants and controls] -->
            <div class="space-y-6">
                
                <!-- WebSocket Connection Panel -->
                <div class="bg-card rounded-xl border border-border p-6 shadow-sm">
                    <h3 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                        <i data-lucide="wifi" class="w-5 h-5"></i>
                        <span>Connection Status</span>
                    </h3>
                    
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-3 bg-primary/10 rounded-lg">
                            <span class="text-sm font-medium">WebSocket</span>
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-primary rounded-full"></div>
                                <span class="text-xs text-primary font-medium">Connected</span>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-3 text-xs">
                            <div class="bg-muted/50 rounded p-2">
                                <div class="font-mono font-medium" data-bind="wsStats.latency">23ms</div>
                                <div class="text-muted-foreground">Latency</div>
                            </div>
                            <div class="bg-muted/50 rounded p-2">
                                <div class="font-mono font-medium" data-bind="wsStats.uptime">2:45:12</div>
                                <div class="text-muted-foreground">Uptime</div>
                            </div>
                        </div>
                        
                        <button class="w-full text-sm text-muted-foreground hover:text-foreground transition-colors" data-event="click:reconnectWebSocket">
                            <i data-lucide="refresh-cw" class="w-4 h-4 inline mr-1"></i>
                            Reconnect
                        </button>
                    </div>
                </div>

                <!-- Live Participants -->
                <div class="bg-card rounded-xl border border-border p-6 shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold flex items-center space-x-2">
                            <i data-lucide="users" class="w-5 h-5"></i>
                            <span>Participants</span>
                        </h3>
                        <span class="text-sm text-muted-foreground" data-bind="participantCount">4 joined</span>
                    </div>
                    
                    <div class="space-y-3">
                        <!-- @MAP: participants.map(participant => ( -->
                        <div class="flex items-center space-x-3 p-3 rounded-lg hover:bg-muted/50 transition-colors" data-mock="true">
                            <div class="relative">
                                <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center text-primary-foreground text-sm font-medium">
                                    <span data-bind="participant.initials">SM</span>
                                </div>
                                <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-primary rounded-full border-2 border-card flex items-center justify-center">
                                    <div class="w-1.5 h-1.5 bg-primary-foreground rounded-full"></div>
                                </div>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between">
                                    <p class="text-sm font-medium text-foreground truncate" data-bind="participant.name">Sarah Miller</p>
                                    <span class="text-xs text-primary font-medium" data-bind="participant.eta">3 min</span>
                                </div>
                                <p class="text-xs text-muted-foreground" data-bind="participant.status">Moving • 0.3 mi away</p>
                                <p class="text-xs text-muted-foreground font-mono" data-bind="participant.lastUpdate">Updated 2s ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-3 p-3 rounded-lg hover:bg-muted/50 transition-colors" data-mock="true">
                            <div class="relative">
                                <div class="w-10 h-10 bg-secondary rounded-full flex items-center justify-center text-secondary-foreground text-sm font-medium">
                                    <span data-bind="participant.initials">MJ</span>
                                </div>
                                <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-yellow-500 rounded-full border-2 border-card flex items-center justify-center">
                                    <div class="w-1.5 h-1.5 bg-white rounded-full"></div>
                                </div>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between">
                                    <p class="text-sm font-medium text-foreground truncate" data-bind="participant.name">Mike Johnson</p>
                                    <span class="text-xs text-yellow-600 font-medium" data-bind="participant.eta">12 min</span>
                                </div>
                                <p class="text-xs text-muted-foreground" data-bind="participant.status">En route • 2.1 mi away</p>
                                <p class="text-xs text-muted-foreground font-mono" data-bind="participant.lastUpdate">Updated 5s ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-3 p-3 rounded-lg hover:bg-muted/50 transition-colors" data-mock="true">
                            <div class="relative">
                                <div class="w-10 h-10 bg-accent rounded-full flex items-center justify-center text-accent-foreground text-sm font-medium">
                                    <span data-bind="participant.initials">AR</span>
                                </div>
                                <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-gray-400 rounded-full border-2 border-card flex items-center justify-center">
                                    <div class="w-1.5 h-1.5 bg-white rounded-full"></div>
                                </div>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between">
                                    <p class="text-sm font-medium text-foreground truncate" data-bind="participant.name">Alex Rodriguez</p>
                                    <span class="text-xs text-gray-500 font-medium" data-bind="participant.eta">--</span>
                                </div>
                                <p class="text-xs text-muted-foreground" data-bind="participant.status">Location disabled</p>
                                <p class="text-xs text-muted-foreground font-mono" data-bind="participant.lastUpdate">Last seen 45m ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-3 p-3 rounded-lg hover:bg-muted/50 transition-colors" data-mock="true">
                            <div class="relative">
                                <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium">
                                    <span data-bind="participant.initials">JD</span>
                                </div>
                                <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-primary rounded-full border-2 border-card flex items-center justify-center">
                                    <div class="w-1.5 h-1.5 bg-primary-foreground rounded-full"></div>
                                </div>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between">
                                    <p class="text-sm font-medium text-foreground truncate" data-bind="participant.name">Jane Doe</p>
                                    <span class="text-xs text-red-500 font-medium" data-bind="participant.eta">Late</span>
                                </div>
                                <p class="text-xs text-muted-foreground" data-bind="participant.status">Stationary • 5.2 mi away</p>
                                <p class="text-xs text-muted-foreground font-mono" data-bind="participant.lastUpdate">Updated 8s ago</p>
                            </div>
                        </div>
                        <!-- @END_MAP )) -->
                    </div>
                    
                    <!-- Add Participants -->
                    <button class="w-full mt-4 p-3 border-2 border-dashed border-border rounded-lg text-muted-foreground hover:text-foreground hover:border-primary/50 transition-colors" data-event="click:inviteParticipants">
                        <i data-lucide="user-plus" class="w-4 h-4 inline mr-2"></i>
                        Invite more friends
                    </button>
                </div>

                <!-- Real-time Controls -->
                <div class="bg-card rounded-xl border border-border p-6 shadow-sm">
                    <h3 class="text-lg font-semibold mb-4 flex items-center space-x-2">
                        <i data-lucide="settings" class="w-5 h-5"></i>
                        <span>Live Tracking Settings</span>
                    </h3>
                    
                    <div class="space-y-4">
                        <!-- Location Sharing Toggle -->
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium">Share My Location</p>
                                <p class="text-xs text-muted-foreground">Real-time broadcasting to participants</p>
                            </div>
                            <div class="relative inline-block w-12 h-6">
                                <input type="checkbox" checked class="sr-only peer" data-implementation="WebSocket location broadcasting toggle">
                                <div class="w-12 h-6 bg-primary rounded-full peer peer-focus:ring-4 peer-focus:ring-primary/20 peer-checked:after:translate-x-6 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
                            </div>
                        </div>
                        
                        <!-- Auto ETA Updates -->
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium">Auto ETA Updates</p>
                                <p class="text-xs text-muted-foreground">Continuous arrival time calculations</p>
                            </div>
                            <div class="relative inline-block w-12 h-6">
                                <input type="checkbox" checked class="sr-only peer" data-implementation="Real-time ETA calculation toggle">
                                <div class="w-12 h-6 bg-primary rounded-full peer peer-focus:ring-4 peer-focus:ring-primary/20 peer-checked:after:translate-x-6 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
                            </div>
                        </div>

                        <!-- High Precision Mode -->
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium">High Precision Mode</p>
                                <p class="text-xs text-muted-foreground">Enhanced GPS accuracy (higher battery usage)</p>
                            </div>
                            <div class="relative inline-block w-12 h-6">
                                <input type="checkbox" class="sr-only peer" data-implementation="Enhanced GPS precision toggle">
                                <div class="w-12 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-gray-300/20 peer-checked:bg-primary peer-checked:after:translate-x-6 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- @COMPONENT: RealTimeToast [WebSocket event notifications] -->
        <!-- These toasts appear for real-time events -->
        <div class="fixed bottom-4 right-4 space-y-2 z-50">
            <!-- @STATE: toasts:array = [] -->
            
            <!-- New Participant Toast -->
            <div class="bg-card border border-border rounded-lg shadow-lg p-4 max-w-sm slide-up" data-mock="true" data-implementation="Show when new participant joins via WebSocket">
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-accent rounded-full flex items-center justify-center text-accent-foreground text-sm font-medium flex-shrink-0">
                        <span>L</span>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-foreground">Lisa joined!</p>
                        <p class="text-xs text-muted-foreground">Just connected to the event</p>
                    </div>
                    <button class="text-muted-foreground hover:text-foreground" data-event="click:dismissToast">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
            
            <!-- Location Update Toast -->
            <div class="bg-card border border-border rounded-lg shadow-lg p-4 max-w-sm slide-up" data-mock="true" data-implementation="Show for significant location changes">
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-primary-foreground flex-shrink-0">
                        <i data-lucide="navigation" class="w-4 h-4"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-foreground">Sarah is moving</p>
                        <p class="text-xs text-muted-foreground">ETA updated: 3 minutes</p>
                    </div>
                    <button class="text-muted-foreground hover:text-foreground" data-event="click:dismissToast">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- @COMPONENT: WebSocketDebugPanel [Development only] -->
        <div class="fixed bottom-4 left-4 bg-card border border-border rounded-lg shadow-lg p-4 max-w-md" data-mock="true" data-implementation="Show in development mode only">
            <div class="flex items-center space-x-2 mb-3">
                <i data-lucide="bug" class="w-4 h-4 text-yellow-500"></i>
                <span class="text-sm font-medium">WebSocket Debug</span>
            </div>
            
            <div class="space-y-2 text-xs font-mono">
                <div class="flex justify-between">
                    <span class="text-muted-foreground">Events Sent:</span>
                    <span class="text-foreground" data-bind="debug.eventsSent">247</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-muted-foreground">Events Received:</span>
                    <span class="text-foreground" data-bind="debug.eventsReceived">183</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-muted-foreground">Reconnections:</span>
                    <span class="text-foreground" data-bind="debug.reconnections">0</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-muted-foreground">Last Event:</span>
                    <span class="text-foreground" data-bind="debug.lastEvent">location_update</span>
                </div>
            </div>
            
            <div class="mt-3 pt-3 border-t border-border">
                <div class="text-xs text-muted-foreground mb-2">Recent Events:</div>
                <div class="bg-muted/30 rounded p-2 text-xs font-mono max-h-20 overflow-y-auto">
                    <div data-bind="debug.recentEvents">
                        <div class="text-primary">→ location_update {lat: 40.7128, lng: -74.0060}</div>
                        <div class="text-accent">← participant_joined {userId: "user_123"}</div>
                        <div class="text-yellow-600">← eta_updated {userId: "user_456", eta: 180}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- @COMPONENT: ShareModal [Web Share API implementation] -->
        <!-- @STATE: showShareModal:boolean = false -->
        <div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden" data-state="showShareModal" data-implementation="Show when share button clicked">
            <div class="bg-card rounded-xl border border-border p-6 shadow-xl max-w-md w-full mx-4">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold">Share Event</h3>
                    <button class="text-muted-foreground hover:text-foreground" data-event="click:closeShareModal">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div class="p-4 bg-muted/50 rounded-lg">
                        <p class="text-sm font-medium text-foreground mb-1" data-bind="event.name">Friday Night Dinner</p>
                        <p class="text-xs text-muted-foreground" data-bind="event.details">Today at 7:30 PM • Olive Garden, Downtown</p>
                    </div>
                    
                    <div class="flex space-x-2">
                        <button class="flex-1 bg-primary text-primary-foreground px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors" data-event="click:nativeShare" data-implementation="Use Web Share API">
                            <i data-lucide="share" class="w-4 h-4 inline mr-2"></i>
                            Share
                        </button>
                        <button class="px-4 py-2 border border-border rounded-lg text-sm font-medium hover:bg-muted transition-colors" data-event="click:copyLink">
                            <i data-lucide="copy" class="w-4 h-4"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- @COMPONENT: DeleteEventModal [Creator permissions] -->
        <!-- @STATE: showDeleteModal:boolean = false -->
        <div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden" data-state="showDeleteModal" data-implementation="Show when delete button clicked and user is creator">
            <div class="bg-card rounded-xl border border-border p-6 shadow-xl max-w-md w-full mx-4">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-10 h-10 bg-destructive/10 rounded-full flex items-center justify-center">
                        <i data-lucide="alert-triangle" class="w-5 h-5 text-destructive"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold">Delete Event</h3>
                        <p class="text-sm text-muted-foreground">This action cannot be undone</p>
                    </div>
                </div>
                
                <div class="mb-6">
                    <p class="text-sm text-foreground mb-2">Are you sure you want to delete this event?</p>
                    <div class="p-3 bg-muted/50 rounded-lg">
                        <p class="text-sm font-medium" data-bind="event.name">Friday Night Dinner</p>
                        <p class="text-xs text-muted-foreground" data-bind="participantCount">4 participants will be notified</p>
                    </div>
                </div>
                
                <div class="flex space-x-3">
                    <button class="flex-1 px-4 py-2 border border-border rounded-lg text-sm font-medium hover:bg-muted transition-colors" data-event="click:closeDeleteModal">
                        Cancel
                    </button>
                    <button class="flex-1 bg-destructive text-destructive-foreground px-4 py-2 rounded-lg text-sm font-medium hover:bg-destructive/90 transition-colors" data-event="click:confirmDeleteEvent" data-implementation="Send DELETE request with creator authorization">
                        Delete Event
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: App -->

    <script>
        // TODO: Implement WebSocket connection management
        // TODO: Implement real-time location broadcasting  
        // TODO: Implement auto-reconnection logic
        // TODO: Implement movement detection with Haversine distance
        // TODO: Implement Web Share API with fallback
        // TODO: Implement event deletion with creator permissions
        
        (() => {
            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            // Mock WebSocket connection simulation for demo
            function simulateWebSocketUpdates() {
                const statusElements = document.querySelectorAll('[data-bind="connectionStatus"]');
                const participants = [
                    { name: 'Sarah Miller', eta: '3 min', status: 'Moving', distance: '0.3 mi' },
                    { name: 'Mike Johnson', eta: '12 min', status: 'En route', distance: '2.1 mi' },
                    { name: 'Alex Rodriguez', eta: '--', status: 'Location disabled', distance: '--' },
                    { name: 'Jane Doe', eta: 'Late', status: 'Stationary', distance: '5.2 mi' }
                ];

                // Simulate connection status updates
                setInterval(() => {
                    const latency = Math.floor(Math.random() * 50) + 10;
                    document.querySelector('[data-bind="wsStats"]').textContent = `4 participants • ${latency}ms latency`;
                }, 3000);

                // Simulate real-time location updates
                setInterval(() => {
                    const randomParticipant = participants[Math.floor(Math.random() * participants.length)];
                    const updates = [
                        `${randomParticipant.name} updated location`,
                        `${randomParticipant.name} ETA changed`,
                        `${randomParticipant.name} started moving`
                    ];
                    
                    // TODO: Replace with actual WebSocket event handling
                    console.log('WebSocket Event:', updates[Math.floor(Math.random() * updates.length)]);
                }, 5000);
            }

            // Mock share functionality
            function handleShare() {
                if (navigator.share) {
                    navigator.share({
                        title: 'Friday Night Dinner',
                        text: 'Join me for dinner tonight!',
                        url: window.location.href
                    }).catch(console.error);
                } else {
                    // Fallback: copy to clipboard
                    navigator.clipboard.writeText(window.location.href)
                        .then(() => console.log('Link copied to clipboard'))
                        .catch(console.error);
                }
            }

            // Initialize demo features
            document.addEventListener('DOMContentLoaded', () => {
                simulateWebSocketUpdates();
                
                // Bind share functionality
                document.querySelector('[data-event="click:shareEvent"]')?.addEventListener('click', handleShare);
                
                // Mock modal handlers
                document.querySelector('[data-event="click:deleteEvent"]')?.addEventListener('click', () => {
                    document.querySelector('[data-state="showDeleteModal"]')?.classList.remove('hidden');
                });
                
                document.querySelector('[data-event="click:closeDeleteModal"]')?.addEventListener('click', () => {
                    document.querySelector('[data-state="showDeleteModal"]')?.classList.add('hidden');
                });
                
                // Auto-dismiss toasts
                setTimeout(() => {
                    document.querySelectorAll('[data-implementation*="Show when"]').forEach(toast => {
                        toast.style.opacity = '0';
                        setTimeout(() => toast.remove(), 300);
                    });
                }, 5000);
            });
        })();
    </script>
</body>
</html>